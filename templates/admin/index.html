{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrahead %}
{{ block.super }}
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
{% endblock %}

{% block content %}
<div id="content-main">
    <!-- Welcome Banner -->
    <div class="welcome-banner">
        <h2>Welcome to IGS OP Admin ğŸ®</h2>
        <p>Manage your gaming platform efficiently with powerful tools and insights</p>
    </div>

    <!-- Quick Stats -->
    <div class="dashboard-stats">
        <div class="stat-card">
            <span class="icon">ğŸ‘¥</span>
            <h3 id="totalUsers">-</h3>
            <p>Total Users</p>
        </div>
        <div class="stat-card">
            <span class="icon">ğŸ’³</span>
            <h3 id="pendingPayments">-</h3>
            <p>Pending Payments</p>
        </div>
        <div class="stat-card">
            <span class="icon">ğŸ“¦</span>
            <h3 id="pendingOrders">-</h3>
            <p>Pending Orders</p>
        </div>
        <div class="stat-card">
            <span class="icon">ğŸ†</span>
            <h3 id="activeTournaments">-</h3>
            <p>Active Tournaments</p>
        </div>
    </div>

    <!-- Quick Actions -->
    <h2 style="color: var(--admin-primary); margin: 2rem 0 1rem 0; font-weight: 700;">âš¡ Quick Actions</h2>
    <div class="quick-actions">
        <a href="{% url 'admin:core_paymentrequest_changelist' %}?status__exact=pending" class="action-card">
            <span class="icon">ğŸ’°</span>
            <h3>Verify Payments</h3>
            <p>Review and approve pending payment requests</p>
        </a>
        <a href="{% url 'admin:core_order_changelist' %}?status__exact=pending" class="action-card">
            <span class="icon">ğŸ“¦</span>
            <h3>Process Orders</h3>
            <p>Manage and fulfill customer orders</p>
        </a>
        <a href="{% url 'admin:core_storeitem_changelist' %}" class="action-card">
            <span class="icon">ğŸª</span>
            <h3>Manage Store</h3>
            <p>Add and edit store products</p>
        </a>
        <a href="{% url 'admin:core_tournament_changelist' %}" class="action-card">
            <span class="icon">ğŸ†</span>
            <h3>Tournaments</h3>
            <p>Create and manage gaming tournaments</p>
        </a>
        <a href="{% url 'admin:core_user_changelist' %}" class="action-card">
            <span class="icon">ğŸ‘¤</span>
            <h3>User Management</h3>
            <p>View and manage registered users</p>
        </a>
        <a href="{% url 'admin:core_transaction_changelist' %}" class="action-card">
            <span class="icon">ğŸ’¸</span>
            <h3>Transactions</h3>
            <p>View all financial transactions</p>
        </a>
    </div>

    <!-- Django Default Content -->
    <h2 style="color: var(--admin-primary); margin: 2rem 0 1rem 0; font-weight: 700;">ğŸ“Š Administration</h2>
    {{ block.super }}
</div>

<script>
// Fetch and display stats
(function() {
    'use strict';
    
    // You can implement API endpoints to fetch real stats
    // For now, we'll show placeholder values
    
    document.addEventListener('DOMContentLoaded', function() {
        // These would normally come from an API
        // Example: fetch('/api/admin/stats/').then(...)
        
        setTimeout(function() {
            // Mock data - replace with real API calls
            document.getElementById('totalUsers').textContent = '0';
            document.getElementById('pendingPayments').textContent = '0';
            document.getElementById('pendingOrders').textContent = '0';
            document.getElementById('activeTournaments').textContent = '0';
        }, 100);
    });
})();
</script>

<style>
    /* Override default Django admin table styling */
    #content-main table {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(1, 24, 216, 0.08);
    }
    
    #content-main caption {
        background: linear-gradient(135deg, var(--admin-light-blue), var(--admin-lavender));
        color: var(--admin-text-dark);
        padding: 1rem 1.5rem;
        font-weight: 700;
        text-align: left;
        border-radius: 12px 12px 0 0;
    }
    
    #content-main th {
        background: linear-gradient(135deg, var(--admin-light-blue), var(--admin-lavender));
        padding: 1rem;
        font-weight: 600;
        text-align: left;
    }
    
    #content-main td {
        padding: 1rem;
        border-bottom: 1px solid var(--admin-border);
    }
    
    #content-main tr:hover {
        background: rgba(1, 24, 216, 0.03);
    }
    
    /* Style the app list */
    .app-description {
        display: none;
    }
    
    #content-main > div {
        margin-bottom: 2rem;
    }
</style>
{% endblock %}

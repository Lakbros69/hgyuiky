{% extends 'custom_admin/base.html' %}

{% block title %}Set Room Details - {{ tournament.title }}{% endblock %}

{% block content %}
<div class="admin-header">
    <h1>Set Room Details</h1>
    <p>Tournament: {{ tournament.title }}</p>
</div>

<div class="admin-card">
    <div class="card-header">
        <h2>Room Information</h2>
        <span class="badge badge-info">
            Time until match: {{ time_until_match.total_seconds|floatformat:0 }} seconds
        </span>
    </div>
    
    <div class="card-body">
        {% if tournament.room_id %}
            <div class="alert alert-success">
                <strong>Room details already set:</strong><br>
                Room ID: {{ tournament.room_id }}<br>
                Password: {{ tournament.room_password }}<br>
                Set at: {{ tournament.room_id_set_at|date:"M d, Y g:i A" }}
            </div>
        {% endif %}
        
        <form method="post" class="admin-form">
            {% csrf_token %}
            
            <div class="form-group">
                <label for="room_id">Room ID</label>
                <input type="text" 
                       id="room_id" 
                       name="room_id" 
                       class="form-control" 
                       value="{{ tournament.room_id }}"
                       required>
            </div>
            
            <div class="form-group">
                <label for="room_password">Room Password</label>
                <input type="text" 
                       id="room_password" 
                       name="room_password" 
                       class="form-control" 
                       value="{{ tournament.room_password }}"
                       required>
            </div>
            
            <div class="button-group">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i>
                    Set Room Details
                </button>
                <a href="{% url 'custom_admin:full_tournaments' %}" class="btn btn-secondary">
                    <i class="fas fa-arrow-left"></i>
                    Back to Tournaments
                </a>
            </div>
        </form>
    </div>
</div>

<div class="admin-card">
    <div class="card-header">
        <h3>Tournament Information</h3>
    </div>
    <div class="card-body">
        <div class="info-grid">
            <div class="info-item">
                <strong>Game:</strong> {{ tournament.get_game_display }}
            </div>
            <div class="info-item">
                <strong>Team Type:</strong> {{ tournament.get_team_type_display }}
            </div>
            <div class="info-item">
                <strong>Max Players:</strong> {{ tournament.max_players }}
            </div>
            <div class="info-item">
                <strong>Current Participants:</strong> {{ tournament.current_participants }}
            </div>
            <div class="info-item">
                <strong>Game Time:</strong> {{ tournament.game_time|date:"M d, Y g:i A" }}
            </div>
            <div class="info-item">
                <strong>Entry Fee:</strong> {{ tournament.entry_fee }} points
            </div>
        </div>
    </div>
</div>
{% endblock %}
